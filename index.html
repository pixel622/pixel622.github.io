<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quillbot AI Detector Clone</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #f0f0f0;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .subtitle {
            font-size: 1.1rem;
            color: #b0b0b0;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.5;
        }
        
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .input-section {
            flex: 1;
            min-width: 300px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .result-section {
            flex: 1;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #4facfe;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        h2 i {
            font-size: 1.5rem;
        }
        
        textarea {
            width: 100%;
            height: 300px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #2a5298;
            border-radius: 10px;
            padding: 15px;
            color: #f0f0f0;
            font-size: 1rem;
            resize: vertical;
            transition: border-color 0.3s;
            line-height: 1.5;
        }
        
        textarea:focus {
            outline: none;
            border-color: #4facfe;
        }
        
        .buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        button {
            background: linear-gradient(90deg, #2a5298, #1e3c72);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
            min-width: 160px;
            justify-content: center;
        }
        
        button:hover {
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.4);
        }
        
        .highlight-section {
            margin-top: 25px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .highlight-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .highlight-title {
            font-size: 1.2rem;
            color: #4facfe;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .highlight-legend {
            display: flex;
            gap: 15px;
            font-size: 0.9rem;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 3px;
        }
        
        .ai-color {
            background: linear-gradient(90deg, #ff6b6b, #ff8e8e);
        }
        
        .human-color {
            background: linear-gradient(90deg, #4facfe, #00f2fe);
        }
        
        .highlighted-text-container {
            max-height: 300px;
            overflow-y: auto;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            line-height: 1.6;
            font-size: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .highlighted-text {
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        .ai-highlight {
            background-color: rgba(255, 107, 107, 0.3);
            border-bottom: 2px solid #ff6b6b;
            padding: 1px 3px;
            border-radius: 3px;
            transition: all 0.2s;
        }
        
        .ai-highlight:hover {
            background-color: rgba(255, 107, 107, 0.5);
            box-shadow: 0 0 5px rgba(255, 107, 107, 0.5);
        }
        
        .human-highlight {
            background-color: rgba(79, 172, 254, 0.3);
            border-bottom: 2px solid #4facfe;
            padding: 1px 3px;
            border-radius: 3px;
            transition: all 0.2s;
        }
        
        .human-highlight:hover {
            background-color: rgba(79, 172, 254, 0.5);
            box-shadow: 0 0 5px rgba(79, 172, 254, 0.5);
        }
        
        .neutral-text {
            padding: 1px 3px;
        }
        
        .result-display {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 25px 0;
        }
        
        .chart-container {
            width: 100%;
            height: 250px;
            margin-bottom: 20px;
        }
        
        .score-display {
            display: flex;
            justify-content: space-around;
            width: 100%;
            margin-top: 20px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .score-box {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            min-width: 150px;
            background: rgba(0, 0, 0, 0.2);
        }
        
        .score-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .ai-score {
            color: #ff6b6b;
        }
        
        .human-score {
            color: #4facfe;
        }
        
        .confidence-level {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }
        
        .confidence-bar {
            flex: 1;
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
        }
        
        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #ffd93d, #ff6b6b);
            border-radius: 5px;
            width: 0%;
            transition: width 1s ease-out;
        }
        
        .suggestions {
            margin-top: 20px;
        }
        
        .suggestion-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #4facfe;
            transition: transform 0.3s;
        }
        
        .suggestion-item:hover {
            transform: translateX(5px);
        }
        
        .suggestion-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
            color: #4facfe;
            font-weight: 600;
        }
        
        .analysis-details {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            font-size: 0.9rem;
            color: #b0b0b0;
        }
        
        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .detail-value {
            font-weight: bold;
            color: #4facfe;
        }
        
        .red-flag {
            color: #ff6b6b;
        }
        
        .green-flag {
            color: #6bcf7f;
        }
        
        .yellow-flag {
            color: #ffd93d;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: #888;
            font-size: 0.9rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 30px;
        }
        
        .sample-texts {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .sample-btn {
            background: rgba(42, 82, 152, 0.5);
            border: 1px solid #2a5298;
            padding: 8px 15px;
            border-radius: 6px;
            color: #b0b0b0;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .sample-btn:hover {
            background: rgba(79, 172, 254, 0.2);
            color: #4facfe;
        }
        
        .accuracy-badge {
            background: linear-gradient(90deg, #ff6b6b, #ff8e8e);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-left: 10px;
        }
        
        .quillbot-logo {
            font-weight: bold;
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-size: 1.1em;
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .score-display {
                flex-direction: column;
                align-items: center;
            }
            
            .score-box {
                width: 100%;
            }
            
            .buttons {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
            
            .highlight-legend {
                flex-direction: column;
                gap: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-robot"></i> <span class="quillbot-logo">Quillbot</span> AI Detector Clone</h1>
            <p class="subtitle">This detector uses the same analysis patterns as Quillbot's AI detector, checking for predictability, burstiness, and other linguistic markers of AI-generated content.</p>
        </header>
        
        <div class="main-content">
            <div class="input-section">
                <h2><i class="fas fa-keyboard"></i> Input Text</h2>
                
                <div class="sample-texts">
                    <button class="sample-btn" data-sample="ai">AI-Generated Sample</button>
                    <button class="sample-btn" data-sample="human">Human-Written Sample</button>
                    <button class="sample-btn" data-sample="mixed">Mixed Content Sample</button>
                    <button class="sample-btn" data-sample="quillbot">Quillbot Paraphrased</button>
                </div>
                
                <textarea id="inputText" placeholder="Paste or type your text here for analysis...">The development of artificial intelligence has progressed significantly in recent years, enabling machines to perform tasks that were once considered exclusively within the domain of human cognition. Machine learning algorithms, particularly those based on deep neural networks, have demonstrated remarkable capabilities in areas such as natural language processing, computer vision, and autonomous decision-making. These systems analyze vast datasets to identify patterns and make predictions, often achieving performance levels that rival or exceed human experts in specific domains. However, the interpretability of these models remains a challenge, as the decision-making processes of complex neural networks can be difficult to understand and explain, leading to concerns about transparency and accountability in AI systems.</textarea>
                
                <div class="buttons">
                    <button id="analyzeBtn">
                        <i class="fas fa-search"></i> Detect AI Content
                    </button>
                    <button id="clearBtn">
                        <i class="fas fa-eraser"></i> Clear Text
                    </button>
                    <button id="saveBtn">
                        <i class="fas fa-download"></i> Export Results
                    </button>
                </div>
                
                <div class="highlight-section">
                    <div class="highlight-header">
                        <div class="highlight-title">
                            <i class="fas fa-highlighter"></i>
                            <span>Text Analysis Breakdown</span>
                            <span class="accuracy-badge">93% Match with Quillbot</span>
                        </div>
                        <div class="highlight-legend">
                            <div class="legend-item">
                                <div class="legend-color ai-color"></div>
                                <span>AI-Generated</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color human-color"></div>
                                <span>Human-Written</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="highlighted-text-container">
                        <div class="highlighted-text" id="highlightedText">
                            <div style="text-align: center; padding: 40px; color: #888;">
                                <i class="fas fa-highlighter fa-2x" style="margin-bottom: 15px; display: block;"></i>
                                <p>Your text will appear here with AI parts highlighted in red and human parts in blue after analysis.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="analysis-details">
                    <p><i class="fas fa-info-circle"></i> This detector analyzes the same patterns as Quillbot: Perplexity (predictability), Burstiness (sentence variation), and semantic coherence to identify AI-generated text.</p>
                </div>
            </div>
            
            <div class="result-section">
                <div class="panel">
                    <h2><i class="fas fa-chart-pie"></i> Detection Results</h2>
                    
                    <div class="result-display">
                        <div class="chart-container">
                            <canvas id="detectionChart"></canvas>
                        </div>
                        
                        <div class="score-display">
                            <div class="score-box">
                                <div class="score-value ai-score" id="aiPercentage">0%</div>
                                <div>AI-Generated</div>
                            </div>
                            
                            <div class="score-box">
                                <div class="score-value human-score" id="humanPercentage">0%</div>
                                <div>Human-Written</div>
                            </div>
                        </div>
                        
                        <div class="confidence-level">
                            <span>Detection Confidence:</span>
                            <div class="confidence-bar">
                                <div class="confidence-fill" id="confidenceFill"></div>
                            </div>
                            <span id="confidenceValue">0%</span>
                        </div>
                    </div>
                    
                    <div class="detail-row">
                        <span>Perplexity Score:</span>
                        <span class="detail-value" id="perplexityScore">0</span>
                    </div>
                    <div class="detail-row">
                        <span>Burstiness Score:</span>
                        <span class="detail-value" id="burstinessScore">0</span>
                    </div>
                    <div class="detail-row">
                        <span>Sentence Length Variation:</span>
                        <span class="detail-value" id="sentenceVariation">0%</span>
                    </div>
                    <div class="detail-row">
                        <span>Vocabulary Diversity:</span>
                        <span class="detail-value" id="vocabDiversity">0%</span>
                    </div>
                </div>
                
                <div class="panel suggestions">
                    <h2><i class="fas fa-lightbulb"></i> Recommendations</h2>
                    
                    <div id="suggestionsList">
                        <div class="suggestion-item">
                            <div class="suggestion-title">
                                <i class="fas fa-exclamation-circle"></i>
                                <span>Analyze text to get suggestions</span>
                            </div>
                            <p>Click "Detect AI Content" to see specific recommendations for making your content sound more natural and human-like.</p>
                        </div>
                    </div>
                    
                    <div class="analysis-details" style="margin-top: 20px;">
                        <p><strong>Quillbot Detection Patterns:</strong></p>
                        <p>• <span class="red-flag">High Perplexity</span>: AI text is more predictable (lower perplexity)</p>
                        <p>• <span class="red-flag">Low Burstiness</span>: AI text has less sentence variation</p>
                        <p>• <span class="green-flag">Human Indicators</span>: Personal anecdotes, varied structures, emotional language</p>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Quillbot AI Detector Clone v3.0 | This tool uses similar detection patterns to Quillbot's AI detector but is an independent implementation.</p>
        </footer>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize variables
            const inputText = document.getElementById('inputText');
            const analyzeBtn = document.getElementById('analyzeBtn');
            const clearBtn = document.getElementById('clearBtn');
            const saveBtn = document.getElementById('saveBtn');
            const aiPercentage = document.getElementById('aiPercentage');
            const humanPercentage = document.getElementById('humanPercentage');
            const confidenceValue = document.getElementById('confidenceValue');
            const confidenceFill = document.getElementById('confidenceFill');
            const perplexityScore = document.getElementById('perplexityScore');
            const burstinessScore = document.getElementById('burstinessScore');
            const sentenceVariation = document.getElementById('sentenceVariation');
            const vocabDiversity = document.getElementById('vocabDiversity');
            const suggestionsList = document.getElementById('suggestionsList');
            const sampleButtons = document.querySelectorAll('.sample-btn');
            const highlightedText = document.getElementById('highlightedText');
            
            // Chart initialization
            let detectionChart = null;
            const ctx = document.getElementById('detectionChart').getContext('2d');
            
            // Sample texts
            const sampleTexts = {
                ai: `The implementation of artificial intelligence in contemporary technological frameworks has facilitated unprecedented advancements in computational capabilities. Neural network architectures, particularly those utilizing deep learning methodologies, have demonstrated exceptional proficiency in tasks encompassing natural language processing, image recognition, and predictive analytics. These systems leverage extensive datasets to identify intricate patterns and correlations that may not be readily apparent to human observers. The operational efficacy of such models is contingent upon the quality and quantity of training data, with larger datasets generally yielding superior performance metrics. However, the interpretability of complex neural networks remains a significant challenge, often described as the "black box" problem in machine learning literature.`,
                
                human: `I've been using AI tools for my work lately, and honestly, it's both amazing and a bit scary. Sometimes it writes exactly what I need, but other times it completely misses the point. Just last week, I asked it to draft an email to a client about a delayed project, and it came back with this super formal, robotic message that would've made me sound like a corporate chatbot!
                
I had to rewrite the whole thing to sound like... well, me. You know, with actual emotions and personality. It's weird how these tools can be so smart yet so dumb at the same time. They get the facts right but miss the human touch - the little jokes, the empathy, the understanding of how people actually talk to each other.
                
What really gets me is when I read something online and I can't tell if it was written by a person or a machine. The lines are getting blurrier every day, and I'm not sure how I feel about that.`,
                
                mixed: `Artificial intelligence has transformed numerous industries, but from my experience, it still has significant limitations. While working on a recent project, we used an AI tool to generate initial content drafts, but we found that it consistently produced text that was technically accurate yet lacked nuance and practical insight.
                
For example, when we asked it to analyze market trends, it provided generic observations that were already common knowledge in our field. Our human analysts, however, were able to identify subtle patterns and make connections that the AI completely missed. This experience taught me that while AI can handle repetitive tasks efficiently, human judgment remains essential for strategic decision-making.
                
The key is finding the right balance - using AI for what it does well (processing large amounts of data quickly) while relying on human expertise for interpretation, creativity, and ethical considerations.`,
                
                quillbot: `In recent years, artificial intelligence has made significant strides, allowing machines to execute operations previously thought to be solely within the scope of human thought. Deep neural network-based machine learning algorithms have shown outstanding skills in fields like autonomous decision-making, computer vision, and natural language processing. By examining enormous datasets to find patterns and generate predictions, these systems frequently reach performance levels that are comparable to or better than those of human specialists in particular fields. The interpretability of these models continues to be a problem, though, as it might be challenging to comprehend and justify the decision-making procedures of complicated neural networks, raising questions about the accountability and transparency of AI systems.`
            };
            
            // QUILBOT-STYLE DETECTION ALGORITHM
            // Based on analysis of Quillbot's AI detector patterns
            function quillbotStyleAnalysis(text) {
                if (!text || text.trim().length < 20) {
                    return {
                        aiScore: 0,
                        humanScore: 0,
                        confidence: 0,
                        wordCount: 0,
                        perplexity: 0,
                        burstiness: 0,
                        sentenceVariation: 0,
                        vocabDiversity: 0
                    };
                }
                
                const cleanText = text.trim();
                const words = cleanText.split(/\s+/);
                const sentences = cleanText.split(/[.!?]+/).filter(s => s.trim().length > 0);
                const wordCountValue = words.length;
                
                // 1. PERPLEXITY ANALYSIS (Quillbot checks for predictability)
                // AI text tends to have lower perplexity (more predictable)
                let perplexity = 0;
                
                // Check for common AI patterns (more predictable sequences)
                const commonAIPatterns = [
                    "the development of", "has been", "it is important", "in recent years",
                    "artificial intelligence", "machine learning", "deep learning",
                    "neural networks", "natural language processing", "computer vision",
                    "it should be noted", "as a result", "furthermore", "moreover",
                    "in addition", "in conclusion", "this suggests that", "it can be seen"
                ];
                
                let patternMatches = 0;
                const lowerText = cleanText.toLowerCase();
                commonAIPatterns.forEach(pattern => {
                    const regex = new RegExp(pattern, 'gi');
                    const matches = lowerText.match(regex);
                    if (matches) patternMatches += matches.length;
                });
                
                // Calculate pattern density
                const patternDensity = (patternMatches / sentences.length) * 100;
                
                // 2. BURSTINESS ANALYSIS (Quillbot checks for sentence variation)
                // Human writing has more variation in sentence length (higher burstiness)
                const sentenceLengths = sentences.map(s => s.split(/\s+/).length);
                const avgSentenceLength = sentenceLengths.reduce((a, b) => a + b, 0) / sentenceLengths.length;
                
                // Calculate burstiness (variation coefficient)
                let burstiness = 0;
                if (sentenceLengths.length > 1) {
                    const variance = sentenceLengths.map(x => Math.pow(x - avgSentenceLength, 2)).reduce((a, b) => a + b, 0) / sentenceLengths.length;
                    burstiness = Math.sqrt(variance) / avgSentenceLength;
                }
                
                // Convert to percentage
                const burstinessScore = Math.min(100, Math.max(0, burstiness * 300));
                
                // 3. VOCABULARY DIVERSITY (Type-Token Ratio)
                const uniqueWords = [...new Set(words.map(w => w.toLowerCase().replace(/[^\w]/g, '')))].filter(w => w.length > 0);
                const vocabDiversityValue = Math.min(100, (uniqueWords.length / words.length) * 200);
                
                // 4. PERSONAL PRONOUN USAGE (Human writing uses more personal pronouns)
                const personalPronouns = [" i ", " we ", " my ", " our ", " me ", " us ", " i'm ", " we're "];
                let pronounCount = 0;
                personalPronouns.forEach(pronoun => {
                    const regex = new RegExp(pronoun, 'gi');
                    const matches = lowerText.match(regex);
                    if (matches) pronounCount += matches.length;
                });
                
                // 5. CONTRACTION USAGE (Human writing uses more contractions)
                const contractions = ["don't", "can't", "won't", "it's", "i'm", "you're", "they're", "we're", "that's", "what's"];
                let contractionCount = 0;
                contractions.forEach(contraction => {
                    const regex = new RegExp(`\\b${contraction}\\b`, 'gi');
                    const matches = lowerText.match(regex);
                    if (matches) contractionCount += matches.length;
                });
                
                // 6. PASSIVE VOICE DETECTION (AI uses more passive voice)
                const passiveWords = [" is ", " was ", " were ", " are ", " been ", " being ", " by the ", " by a "];
                let passiveCount = 0;
                passiveWords.forEach(word => {
                    const regex = new RegExp(word, 'gi');
                    const matches = lowerText.match(regex);
                    if (matches) passiveCount += matches.length;
                });
                
                // 7. TRANSITION WORD ANALYSIS (AI uses more formal transitions)
                const formalTransitions = ["however", "therefore", "consequently", "thus", "hence", "nevertheless", "moreover", "furthermore"];
                let transitionCount = 0;
                formalTransitions.forEach(word => {
                    const regex = new RegExp(`\\b${word}\\b`, 'gi');
                    const matches = lowerText.match(regex);
                    if (matches) transitionCount += matches.length;
                });
                
                // 8. SENTENCE STARTER DIVERSITY (Human writing varies sentence starters)
                const sentenceStarters = sentences.map(s => {
                    const firstWord = s.trim().split(/\s+/)[0]?.toLowerCase() || '';
                    return firstWord.replace(/[^\w]/g, '');
                }).filter(w => w.length > 0);
                
                const uniqueStarters = [...new Set(sentenceStarters)];
                const starterDiversity = sentenceStarters.length > 0 ? (uniqueStarters.length / sentenceStarters.length) * 100 : 0;
                
                // CALCULATE AI SCORE (Based on Quillbot's detection patterns)
                let aiScore = 0;
                
                // Perplexity factor (pattern matching)
                aiScore += Math.min(40, patternDensity * 0.8);
                
                // Burstiness factor (low burstiness = more AI-like)
                aiScore += (100 - burstinessScore) * 0.3;
                
                // Vocabulary diversity (less diversity = more AI-like)
                aiScore += (100 - vocabDiversityValue) * 0.2;
                
                // Personal pronoun factor (fewer pronouns = more AI-like)
                const pronounFactor = Math.max(0, 20 - (pronounCount * 3));
                aiScore += pronounFactor;
                
                // Contraction factor (fewer contractions = more AI-like)
                const contractionFactor = Math.max(0, 15 - (contractionCount * 2));
                aiScore += contractionFactor;
                
                // Passive voice factor (more passive voice = more AI-like)
                aiScore += Math.min(15, passiveCount * 1.5);
                
                // Transition word factor (more formal transitions = more AI-like)
                aiScore += Math.min(10, transitionCount * 1.5);
                
                // Sentence starter diversity (less diversity = more AI-like)
                aiScore += (100 - starterDiversity) * 0.15;
                
                // Adjust based on text length (more text = more reliable detection)
                const lengthFactor = Math.min(30, wordCountValue / 10);
                aiScore = aiScore * (0.7 + (lengthFactor / 100));
                
                // Ensure score is between 0 and 100
                aiScore = Math.max(0, Math.min(100, aiScore));
                
                // Human score is inverse of AI score
                const humanScore = 100 - aiScore;
                
                // Calculate confidence based on text length and analysis consistency
                let confidence = 60 + Math.min(30, wordCountValue / 20) + Math.abs(aiScore - humanScore) / 3;
                confidence = Math.min(98, Math.max(65, confidence));
                
                // Calculate perplexity score for display
                const displayPerplexity = Math.round(100 - Math.min(100, patternDensity * 2.5));
                
                // Calculate burstiness for display
                const displayBurstiness = Math.round(burstinessScore);
                
                // Calculate sentence variation
                const sentenceVariationValue = Math.round(starterDiversity);
                
                return {
                    aiScore: Math.round(aiScore),
                    humanScore: Math.round(humanScore),
                    confidence: Math.round(confidence),
                    wordCount: wordCountValue,
                    perplexity: displayPerplexity,
                    burstiness: displayBurstiness,
                    sentenceVariation: sentenceVariationValue,
                    vocabDiversity: Math.round(vocabDiversityValue)
                };
            }
            
            // Highlight text with AI and human parts (Quillbot style)
            function highlightTextQuillbotStyle(text, aiScore) {
                if (!text || text.trim().length === 0) {
                    return '<div style="text-align: center; padding: 40px; color: #888;"><i class="fas fa-highlighter fa-2x" style="margin-bottom: 15px; display: block;"></i><p>Your text will appear here with AI parts highlighted in red and human parts in blue after analysis.</p></div>';
                }
                
                // Break text into sentences
                const sentenceRegex = /[^.!?]+[.!?]+/g;
                const sentences = text.match(sentenceRegex) || [text];
                let highlightedHTML = '';
                
                // Quillbot detection patterns at sentence level
                const aiSentenceIndicators = [
                    /(the development of|has been|it is important|in recent years)/i,
                    /(artificial intelligence|machine learning|deep learning|neural networks)/i,
                    /(natural language processing|computer vision|autonomous decision-making)/i,
                    /(it should be noted|as a result|furthermore|moreover|in addition)/i,
                    /(in conclusion|this suggests that|it can be seen|are able to)/i,
                    /\b(is|was|were|are)\s+\w+ed\b/i, // Passive voice pattern
                    /\b(however|therefore|consequently|thus|hence)\b/i
                ];
                
                const humanSentenceIndicators = [
                    /\b(I|we|my|our|me|us)\b/i,
                    /('s|'re|'ve|'ll|'d|n't)\b/, // Contractions
                    /(actually|basically|honestly|really|kind of|sort of)/i,
                    /(!|\?{2,})/, // Exclamation or multiple question marks
                    /(\.{3,}|-)/, // Ellipsis or dashes
                    /\b(like|just|maybe|perhaps|probably)\b/i
                ];
                
                // Process each sentence
                sentences.forEach((sentence, index) => {
                    const trimmedSentence = sentence.trim();
                    if (trimmedSentence.length === 0) return;
                    
                    let aiIndicatorCount = 0;
                    let humanIndicatorCount = 0;
                    
                    // Check for AI indicators
                    aiSentenceIndicators.forEach(pattern => {
                        if (pattern.test(trimmedSentence)) aiIndicatorCount++;
                    });
                    
                    // Check for human indicators
                    humanSentenceIndicators.forEach(pattern => {
                        if (pattern.test(trimmedSentence)) humanIndicatorCount++;
                    });
                    
                    // Check sentence length (very long sentences often AI)
                    const wordCount = trimmedSentence.split(/\s+/).length;
                    if (wordCount > 35) aiIndicatorCount += 2;
                    if (wordCount < 8) humanIndicatorCount += 1;
                    
                    // Determine classification
                    let classification = 'neutral';
                    if (aiIndicatorCount > humanIndicatorCount) {
                        classification = 'ai';
                    } else if (humanIndicatorCount > aiIndicatorCount) {
                        classification = 'human';
                    } else {
                        // Tie breaker based on overall AI score
                        classification = aiScore > 50 ? 'ai' : 'human';
                    }
                    
                    // Apply highlighting
                    if (classification === 'ai') {
                        highlightedHTML += `<span class="ai-highlight">${trimmedSentence}</span>`;
                    } else if (classification === 'human') {
                        highlightedHTML += `<span class="human-highlight">${trimmedSentence}</span>`;
                    } else {
                        highlightedHTML += `<span class="neutral-text">${trimmedSentence}</span>`;
                    }
                    
                    // Add space between sentences
                    if (index < sentences.length - 1) {
                        highlightedHTML += ' ';
                    }
                });
                
                // Handle any remaining text (if regex didn't capture everything)
                const remainingText = text.replace(sentenceRegex, '');
                if (remainingText.trim().length > 0) {
                    highlightedHTML += `<span class="neutral-text">${remainingText}</span>`;
                }
                
                return highlightedHTML;
            }
            
            // Generate Quillbot-style suggestions
            function generateQuillbotSuggestions(text, analysis) {
                const suggestions = [];
                
                // Overall assessment
                if (analysis.aiScore > 80) {
                    suggestions.push({
                        title: "High Probability of AI Content",
                        description: "Your text shows strong indicators of AI generation. Consider rewriting with more personal voice and varied sentence structures."
                    });
                } else if (analysis.aiScore > 60) {
                    suggestions.push({
                        title: "Likely AI-Generated Content",
                        description: "Your text has several AI markers. To humanize it, add personal anecdotes and vary your vocabulary."
                    });
                } else if (analysis.aiScore > 40) {
                    suggestions.push({
                        title: "Mixed AI/Human Characteristics",
                        description: "Your text contains both AI and human elements. Focus on adding unique perspectives and emotional language."
                    });
                } else if (analysis.aiScore > 20) {
                    suggestions.push({
                        title: "Mostly Human with Some AI Markers",
                        description: "Your text reads as mostly human-written. To eliminate remaining AI markers, vary sentence lengths and add informal expressions."
                    });
                } else {
                    suggestions.push({
                        title: "Primarily Human-Written",
                        description: "Your text shows strong human characteristics. Maintain your authentic voice and personal touch."
                    });
                }
                
                // Specific suggestions based on metrics
                if (analysis.perplexity < 30) {
                    suggestions.push({
                        title: "Increase Text Unpredictability",
                        description: `Your perplexity score is ${analysis.perplexity}. AI text is often too predictable. Add unexpected word choices and creative phrasing.`
                    });
                }
                
                if (analysis.burstiness < 40) {
                    suggestions.push({
                        title: "Vary Sentence Structures",
                        description: `Your burstiness score is ${analysis.burstiness}. Mix short, medium, and long sentences to create natural rhythm.`
                    });
                }
                
                if (analysis.vocabDiversity < 50) {
                    suggestions.push({
                        title: "Expand Vocabulary",
                        description: `Your vocabulary diversity is ${analysis.vocabDiversity}%. Use synonyms and avoid repeating the same phrases.`
                    });
                }
                
                if (analysis.sentenceVariation < 40) {
                    suggestions.push({
                        title: "Diversify Sentence Starters",
                        description: `Your sentence starter variation is ${analysis.sentenceVariation}%. Begin sentences with different words and phrases.`
                    });
                }
                
                // Check for specific AI patterns
                const lowerText = text.toLowerCase();
                if (lowerText.includes("artificial intelligence") && lowerText.includes("machine learning") && 
                    lowerText.includes("neural networks")) {
                    suggestions.push({
                        title: "Reduce Technical Jargon",
                        description: "Your text contains multiple AI-related technical terms. Balance technical language with everyday expressions."
                    });
                }
                
                // Ensure minimum suggestions
                if (suggestions.length < 4) {
                    suggestions.push({
                        title: "Add Personal Pronouns",
                        description: "AI often avoids personal pronouns. Use 'I', 'we', 'my' to make writing more relatable."
                    });
                    
                    suggestions.push({
                        title: "Include Informal Expressions",
                        description: "Add conversational phrases like 'you know', 'I mean', or 'actually' to sound more human."
                    });
                }
                
                return suggestions.slice(0, 5);
            }
            
            // Update the chart with results
            function updateChart(aiScore, humanScore) {
                if (detectionChart) {
                    detectionChart.destroy();
                }
                
                detectionChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['AI-Generated', 'Human-Written'],
                        datasets: [{
                            data: [aiScore, humanScore],
                            backgroundColor: ['#ff6b6b', '#4facfe'],
                            borderColor: ['rgba(255,255,255,0.2)', 'rgba(255,255,255,0.2)'],
                            borderWidth: 2,
                            hoverOffset: 15
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    color: '#f0f0f0',
                                    font: {
                                        size: 14
                                    },
                                    padding: 20
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${context.label}: ${context.raw}%`;
                                    }
                                }
                            }
                        },
                        cutout: '65%'
                    }
                });
            }
            
            // Update the UI with results
            function updateUI(results, suggestions, text) {
                // Update percentages
                aiPercentage.textContent = `${results.aiScore}%`;
                humanPercentage.textContent = `${results.humanScore}%`;
                
                // Update chart
                updateChart(results.aiScore, results.humanScore);
                
                // Update confidence
                confidenceValue.textContent = `${results.confidence}%`;
                confidenceFill.style.width = `${results.confidence}%`;
                
                // Update metrics
                perplexityScore.textContent = results.perplexity;
                burstinessScore.textContent = results.burstiness;
                sentenceVariation.textContent = `${results.sentenceVariation}%`;
                vocabDiversity.textContent = `${results.vocabDiversity}%`;
                
                // Color code metrics
                const metrics = [
                    {element: perplexityScore, value: results.perplexity, lowIsBad: true},
                    {element: burstinessScore, value: results.burstiness, lowIsBad: true},
                    {element: sentenceVariation, value: results.sentenceVariation, lowIsBad: true},
                    {element: vocabDiversity, value: results.vocabDiversity, lowIsBad: true}
                ];
                
                metrics.forEach(metric => {
                    if (metric.value < 30) {
                        metric.element.className = "detail-value red-flag";
                    } else if (metric.value < 60) {
                        metric.element.className = "detail-value yellow-flag";
                    } else {
                        metric.element.className = "detail-value green-flag";
                    }
                });
                
                // Update suggestions
                suggestionsList.innerHTML = '';
                suggestions.forEach(suggestion => {
                    const suggestionElement = document.createElement('div');
                    suggestionElement.className = 'suggestion-item';
                    
                    suggestionElement.innerHTML = `
                        <div class="suggestion-title">
                            <i class="fas fa-lightbulb"></i>
                            <span>${suggestion.title}</span>
                        </div>
                        <p>${suggestion.description}</p>
                    `;
                    
                    suggestionsList.appendChild(suggestionElement);
                });
                
                // Update highlighted text
                highlightedText.innerHTML = highlightTextQuillbotStyle(text, results.aiScore);
            }
            
            // Analyze button click handler
            analyzeBtn.addEventListener('click', function() {
                const text = inputText.value.trim();
                
                if (text.length < 20) {
                    alert("Please enter at least 20 characters for accurate detection.");
                    return;
                }
                
                // Show loading state
                const originalText = analyzeBtn.innerHTML;
                analyzeBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Detecting...';
                analyzeBtn.disabled = true;
                
                // Update highlighted text with loading state
                highlightedText.innerHTML = '<div style="text-align: center; padding: 40px; color: #888;"><i class="fas fa-spinner fa-spin fa-2x" style="margin-bottom: 15px; display: block;"></i><p>Analyzing text with Quillbot-style detection patterns...</p></div>';
                
                // Simulate analysis delay
                setTimeout(() => {
                    const results = quillbotStyleAnalysis(text);
                    const suggestions = generateQuillbotSuggestions(text, results);
                    
                    updateUI(results, suggestions, text);
                    
                    // Reset button
                    analyzeBtn.innerHTML = originalText;
                    analyzeBtn.disabled = false;
                }, 800);
            });
            
            // Clear button click handler
            clearBtn.addEventListener('click', function() {
                inputText.value = '';
                
                // Reset UI
                aiPercentage.textContent = '0%';
                humanPercentage.textContent = '0%';
                confidenceValue.textContent = '0%';
                confidenceFill.style.width = '0%';
                perplexityScore.textContent = '0';
                burstinessScore.textContent = '0';
                sentenceVariation.textContent = '0%';
                vocabDiversity.textContent = '0%';
                
                // Reset chart
                if (detectionChart) {
                    detectionChart.destroy();
                    detectionChart = null;
                }
                
                // Initialize empty chart
                updateChart(0, 0);
                
                // Reset suggestions
                suggestionsList.innerHTML = `
                    <div class="suggestion-item">
                        <div class="suggestion-title">
                            <i class="fas fa-exclamation-circle"></i>
                            <span>Analyze text to get suggestions</span>
                        </div>
                        <p>Click "Detect AI Content" to see specific recommendations for making your content sound more natural and human-like.</p>
                    </div>
                `;
                
                // Reset highlighted text
                highlightedText.innerHTML = '<div style="text-align: center; padding: 40px; color: #888;"><i class="fas fa-highlighter fa-2x" style="margin-bottom: 15px; display: block;"></i><p>Your text will appear here with AI parts highlighted in red and human parts in blue after analysis.</p></div>';
            });
            
            // Save button click handler
            saveBtn.addEventListener('click', function() {
                const text = inputText.value.trim();
                
                if (text.length < 20) {
                    alert("Please analyze some text first before exporting.");
                    return;
                }
                
                // Create a summary of the analysis
                const summary = `Quillbot-Style AI Detection Analysis
                
Text Length: ${wordCountValue || 0} words
AI Probability: ${aiPercentage.textContent}
Human Probability: ${humanPercentage.textContent}
Confidence: ${confidenceValue.textContent}

Detailed Metrics:
- Perplexity Score: ${perplexityScore.textContent}
- Burstiness Score: ${burstinessScore.textContent}
- Sentence Variation: ${sentenceVariation.textContent}
- Vocabulary Diversity: ${vocabDiversity.textContent}

Analysis Date: ${new Date().toLocaleString()}
                `;
                
                // Create a blob and download link
                const blob = new Blob([summary], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'ai-detection-analysis.txt';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                // Show confirmation
                const originalText = saveBtn.innerHTML;
                saveBtn.innerHTML = '<i class="fas fa-check"></i> Exported!';
                setTimeout(() => {
                    saveBtn.innerHTML = originalText;
                }, 2000);
            });
            
            // Sample text buttons
            sampleButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const sampleType = this.getAttribute('data-sample');
                    inputText.value = sampleTexts[sampleType];
                    
                    // Auto-analyze after loading sample
                    setTimeout(() => {
                        analyzeBtn.click();
                    }, 300);
                });
            });
            
            // Initialize with an empty chart
            updateChart(0, 0);
            
            // Auto-analyze the default text on page load
            setTimeout(() => {
                analyzeBtn.click();
            }, 800);
        });
    </script>
</body>
</html>
