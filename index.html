<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pokémon Amber: Sequoia Edition</title>
    <style>
        :root {
            --gba-blue-bg: #4a80b8;
            --gba-blue-border: #184068;
            --wood-floor: #d89060;
            --ui-font: 'Courier New', Courier, monospace;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background: #222; overflow: hidden; touch-action: none;
            display: flex; justify-content: center; align-items: center;
        }

        #game-screen {
            position: relative;
            width: 100vw; height: 100vh;
            max-width: 800px; max-height: 600px;
            background: var(--wood-floor);
            border: 8px solid #333;
            overflow: hidden;
            background-image: 
                linear-gradient(rgba(0,0,0,0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0,0,0,0.1) 1px, transparent 1px);
            background-size: 40px 40px; /* Floor Plank Effect */
        }

        /* --- THE SCENE: SEQUOIA'S STUDY --- */
        .bookshelf {
            position: absolute; top: 20px;
            width: 120px; height: 180px;
            background: #804020; border: 4px solid #402010;
        }
        #shelf-left { left: 40px; }
        #shelf-right { right: 40px; }

        .fireplace {
            position: absolute; top: 10px; left: 50%;
            transform: translateX(-50%);
            width: 100px; height: 120px;
            background: #603010; border-top: 20px solid #a05020;
        }

        .desk {
            position: absolute; top: 200px; left: 50%;
            transform: translateX(-50%);
            width: 220px; height: 80px;
            background: #a06030; border: 4px solid #503010;
            box-shadow: 0 10px rgba(0,0,0,0.2);
            z-index: 5;
        }

        /* --- UI: DIALOGUE BOX (EXACTLY LIKE IMAGE) --- */
        #dialogue-container {
            position: absolute; bottom: 20px; left: 50%;
            transform: translateX(-50%);
            width: 90%; height: 140px;
            background: white;
            border: 6px solid var(--gba-blue-border);
            border-radius: 20px;
            z-index: 100;
            box-sizing: border-box;
            padding: 20px;
        }

        #speaker-tag {
            position: absolute; top: -25px; left: 30px;
            background: var(--gba-blue-bg);
            color: white; padding: 5px 20px;
            border-radius: 10px 10px 0 0;
            border: 4px solid var(--gba-blue-border);
            font-family: var(--ui-font); font-weight: bold;
        }

        #dialogue-text {
            font-family: var(--ui-font); font-size: 1.2rem;
            line-height: 1.4; color: #333;
        }

        /* --- TOUCH CONTROLS --- */
        #joystick-container {
            position: absolute; bottom: 40px; left: 40px;
            width: 120px; height: 120px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%; border: 2px solid rgba(255,255,255,0.3);
            display: flex; justify-content: center; align-items: center;
        }

        #joystick-stick {
            width: 50px; height: 50px;
            background: rgba(0,0,0,0.4); border-radius: 50%;
            box-shadow: 0 4px #000;
        }

        #action-group {
            position: absolute; bottom: 40px; right: 40px;
            width: 150px; height: 150px;
        }

        .btn-gba {
            position: absolute; width: 60px; height: 60px;
            border-radius: 50%; color: white;
            font-family: var(--ui-font); font-weight: bold;
            display: flex; justify-content: center; align-items: center;
            border: 4px solid rgba(0,0,0,0.3); cursor: pointer;
        }
        #btn-a { background: #e04040; right: 0; top: 0; }
        #btn-b { background: #f0c040; right: 70px; top: 40px; }

        /* --- SPRITES --- */
        .sprite { position: absolute; image-rendering: pixelated; }
        #player { width: 40px; height: 60px; background: red; bottom: 180px; left: 50%; margin-left: -20px; z-index: 10; }
        #sequoia { width: 40px; height: 60px; background: #eee; top: 150px; left: 45%; border: 1px solid #ccc; }
        #rival { width: 40px; height: 60px; background: #555; top: 150px; left: 55%; }

        .starter-ball {
            width: 20px; height: 20px; background: white;
            border-radius: 50%; border-top: 10px solid red;
            position: absolute; top: -30px; cursor: pointer;
            border-bottom: 2px solid black;
        }
    </style>
</head>
<body>

<div id="game-screen">
    <div class="bookshelf" id="shelf-left"></div>
    <div class="bookshelf" id="shelf-right"></div>
    <div class="fireplace"></div>
    
    <div class="desk">
        <div id="ball-treecko" class="starter-ball" style="left: 30px;" onclick="pick('Treecko')"></div>
        <div id="ball-froakie" class="starter-ball" style="left: 100px;" onclick="pick('Froakie')"></div>
        <div id="ball-charmander" class="starter-ball" style="left: 170px;" onclick="pick('Charmander')"></div>
    </div>

    <div id="sequoia" class="sprite"></div>
    <div id="rival" class="sprite"></div>
    <div id="player" class="sprite"></div>

    <div id="dialogue-container" onclick="nextLine()">
        <div id="speaker-tag">Professor Sequoia</div>
        <div id="dialogue-text">Welcome, young Trainer! These three Pokémon were sent here for study...</div>
    </div>

    <div id="joystick-container">
        <div id="joystick-stick"></div>
    </div>

    <div id="action-group">
        <div id="btn-a" class="btn-gba" onclick="nextLine()">A</div>
        <div id="btn-b" class="btn-gba">B</div>
    </div>
</div>

<script>
    const dialogue = [
        "Professor Sequoia: Earlier, a mysterious tremor shook the Orebound region.",
        "We need Trainers to help us understand how these Pokémon react.",
        "Professor Sequoia: Choose your partner carefully!",
        "Rival: Hey! I get to pick right after you, don't forget!"
    ];
    let currentLine = 0;

    function nextLine() {
        if(currentLine < dialogue.length) {
            document.getElementById('dialogue-text').innerText = dialogue[currentLine];
            currentLine++;
        } else {
            document.getElementById('dialogue-container').style.opacity = "0.5";
            document.getElementById('dialogue-text').innerText = "(Choose a Poké Ball from the desk!)";
        }
    }

    function pick(name) {
        document.getElementById('dialogue-container').style.opacity = "1";
        document.getElementById('dialogue-text').innerText = "Professor Sequoia: So, you've chosen " + name + "! A wonderful choice for the Orebound terrain.";
        
        // Hide the other balls for effect
        document.querySelectorAll('.starter-ball').forEach(b => b.style.display = 'none');
        
        setTimeout(() => {
            alert("Adventure Start! You received " + name + " and the Pokédex!");
        }, 1000);
    }

    // Basic Joystick Visual Feedback
    document.getElementById('joystick-container').addEventListener('touchmove', function(e) {
        let touch = e.touches[0];
        let stick = document.getElementById('joystick-stick');
        let rect = this.getBoundingClientRect();
        let x = touch.clientX - rect.left - 60;
        let y = touch.clientY - rect.top - 60;
        
        // Constrain movement
        let dist = Math.sqrt(x*x + y*y);
        if(dist > 30) { x *= 30/dist; y *= 30/dist; }
        
        stick.style.transform = `translate(${x}px, ${y}px)`;
    });

    document.getElementById('joystick-container').addEventListener('touchend', function() {
        document.getElementById('joystick-stick').style.transform = `translate(0px, 0px)`;
    });
</script>

</body>
</html>
