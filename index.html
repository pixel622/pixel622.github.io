<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COMPLIANCE CLICKER ¬∑ KYC NIGHTMARE</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Courier New', Courier, monospace;
            user-select: none;
        }
        body {
            background: #1a1e2b;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            padding: 16px;
        }
        .game-container {
            max-width: 780px;
            width: 100%;
            background: #0b0d15;
            border: 2px solid #3a4a5f;
            border-radius: 24px;
            padding: 24px 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.8), 0 0 0 2px #2a3b4e inset;
            color: #c0d3e6;
        }
        h1 {
            font-size: 2.2rem;
            font-weight: bold;
            margin: 0 0 8px 0;
            letter-spacing: 3px;
            text-align: center;
            text-shadow: 0 0 5px #7aa9c9;
            color: #e0eefb;
            border-bottom: 2px dashed #4d708b;
            padding-bottom: 10px;
        }
        .tagline {
            text-align: center;
            font-style: italic;
            margin-bottom: 20px;
            color: #8fa9c2;
            font-size: 0.9rem;
        }
        .status-panel {
            background: #10131f;
            border: 2px solid #4f6f8f;
            border-radius: 18px;
            padding: 16px 20px;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            box-shadow: inset 0 0 15px #00000055;
        }
        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 100px;
        }
        .stat-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            color: #7e98b3;
            letter-spacing: 1px;
        }
        .stat-value {
            font-size: 2.2rem;
            font-weight: bold;
            line-height: 1.2;
            color: #ffd98c;
            text-shadow: 0 0 8px #f0b000;
        }
        .progress-section {
            background: #191e2b;
            border-radius: 60px;
            height: 40px;
            border: 2px solid #5c799b;
            margin: 25px 0 20px 0;
            position: relative;
            box-shadow: inset 0 3px 6px #00000080;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #d45f5f, #aa4040);
            box-shadow: 0 0 15px #ff5e5e;
            transition: width 0.2s ease;
        }
        .progress-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 2px black;
            mix-blend-mode: difference;
            font-size: 1.1rem;
        }
        .click-area {
            background: #1d2a36;
            border-radius: 50px;
            padding: 30px 20px;
            text-align: center;
            border: 4px solid #51718b;
            margin-bottom: 28px;
            cursor: pointer;
            transition: all 0.08s;
            box-shadow: 0 8px 0 #2a3b4a, 0 12px 25px black;
        }
        .click-area:active {
            transform: translateY(6px);
            box-shadow: 0 2px 0 #2a3b4a, 0 8px 20px black;
            border-color: #ffb86b;
        }
        .click-area p {
            font-size: 1.8rem;
            font-weight: bold;
            margin: 0;
            color: #ebcba0;
        }
        .click-area small {
            color: #afc9e7;
            font-size: 1rem;
        }
        .shop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
            margin: 24px 0 20px;
        }
        .shop-item {
            background: #141c26;
            border: 2px solid #3a5f7a;
            border-radius: 20px;
            padding: 14px 10px;
            text-align: center;
            transition: 0.1s;
            box-shadow: 0 5px 0 #1a2938;
        }
        .shop-item.disabled {
            opacity: 0.45;
            filter: grayscale(0.7);
            border-color: #4d4f5a;
            box-shadow: none;
        }
        .item-name {
            font-weight: bold;
            font-size: 1.2rem;
            color: #bfdaf5;
        }
        .item-cost {
            font-size: 1.1rem;
            background: #1f3343;
            display: inline-block;
            padding: 4px 15px;
            border-radius: 40px;
            margin: 10px 0 6px;
            border: 1px solid #ffcf8a;
            color: #ffe1a3;
        }
        .item-desc {
            font-size: 0.75rem;
            color: #90accf;
            min-height: 40px;
        }
        button {
            background: #38658f;
            border: none;
            color: white;
            font-weight: bold;
            font-size: 1.1rem;
            padding: 8px 16px;
            border-radius: 40px;
            cursor: pointer;
            font-family: inherit;
            border-bottom: 4px solid #1b3348;
            transition: 0.07s;
            width: 100%;
        }
        button:active:not(:disabled) {
            transform: translateY(3px);
            border-bottom-width: 1px;
        }
        button:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            background: #4b5b6b;
            border-bottom-color: #2e3d4d;
        }
        .scrutiny-meter {
            background: #1b222f;
            border-radius: 30px;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            gap: 18px;
            margin: 20px 0 5px;
            border: 2px solid #ab6f4b;
        }
        .scrutiny-label {
            font-weight: bold;
            color: #f9b buton;
            white-space: nowrap;
        }
        .scrutiny-bg {
            flex: 1;
            height: 24px;
            background: #352b22;
            border-radius: 40px;
            overflow: hidden;
            border: 2px solid #765d44;
        }
        .scrutiny-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #f19b3e, #f1c40f);
            box-shadow: 0 0 12px orange;
        }
        .scrutiny-value {
            font-weight: bold;
            min-width: 4ch;
            color: #ffc285;
        }
        .footer-small {
            font-size: 0.7rem;
            color: #4e6984;
            text-align: center;
            margin-top: 25px;
            border-top: 1px solid #2e4560;
            padding-top: 12px;
        }
        .flash {
            color: #ffaa70;
            font-weight: bold;
        }
    </style>
</head>
<body>
<div class="game-container">
    <h1>‚öñÔ∏è COMPLIANCE CLICKER</h1>
    <div class="tagline">The blockchain is immutable. Your paperwork is not.</div>

    <!-- main stats -->
    <div class="status-panel">
        <div class="stat"><span class="stat-label">CP (sanity)</span><span id="cpDisplay" class="stat-value">0</span></div>
        <div class="stat"><span class="stat-label">KC (credits)</span><span id="kcDisplay" class="stat-value">0</span></div>
        <div class="stat"><span class="stat-label">users/s</span><span id="upsDisplay" class="stat-value">0.0</span></div>
    </div>

    <!-- backlog progress -->
    <div class="progress-section">
        <div id="backlogBar" class="progress-bar" style="width:0%"></div>
        <span class="progress-label" id="backlogText">BACKLOG 0%</span>
    </div>

    <!-- main click button -->
    <div id="mainClick" class="click-area">
        <p>üìÑ VERIFY üì∏</p>
        <small>blurry passport ¬∑ selfie ¬∑ utility bill</small>
    </div>

    <!-- scrutiny meter -->
    <div class="scrutiny-meter">
        <span class="scrutiny-label">‚ö° REGULATORY SCRUTINY</span>
        <div class="scrutiny-bg"><div id="scrutinyFill" class="scrutiny-fill" style="width:0%"></div></div>
        <span id="scrutinyPercent" class="scrutiny-value">0%</span>
    </div>

    <!-- shop -->
    <h3 style="margin: 12px 0 4px; color:#c6defa;">üîß AUTOMATION (spend CP)</h3>
    <div class="shop-grid" id="cpShop"></div>

    <h3 style="margin: 18px 0 4px; color:#c6defa;">üíº COMPLIANCE MARKETS (spend KC)</h3>
    <div class="shop-grid" id="kcShop"></div>

    <!-- form 83-B mini game -->
    <div style="background: #131d2b; border-radius: 30px; padding: 15px; border: 2px solid #6a4e3c; margin: 15px 0;">
        <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
            <span style="font-weight: bold; background: #342d1f; padding: 8px 12px; border-radius: 30px;">üìã FORM 83-B</span>
            <span style="color: #aac7f0;">convert CP ‚Üí KC</span>
            <button id="convertBtn" style="width: auto; margin-left: auto; background: #5f6d3a;">CONVERT</button>
        </div>
        <div id="conversionStatus" style="font-size:0.85rem; margin-top:10px; color:#f4cba4;"></div>
    </div>

    <div class="footer-small">
        ‚ö†Ô∏è every high‚Äërisk user increases scrutiny ¬∑ if backlog > 100% you're replaced by an offshore team
    </div>
</div>

<script>
    (function() {
        // ---------- state ----------
        let cp = 0;                 // compliance points (sanity)
        let kc = 0;                 // KYC credits
        let backlog = 0;            // 0 .. 100 (if >100 gameover)
        let scrutiny = 0;           // 0..100 (if >=100 triggers consultant message)
        let usersProcessed = 0;      // for risk flavor

        // automation multipliers
        let autoClickers = 0;          // 0.2/sec each
        let docVerifiers = 0;          // +1 CP per click
        let ocrScanners = 0;            // reduces backlog increase per user
        let livenessAI = 0;             // reduces scrutiny gain
        let blockchainModule = 0;        // adds extra scrutiny but boosts KC? we'll do: +0.5kc per sec but +scrutiny/sec
        let consultantCharge = 0;        // one-use? we make it a toggle cooldown later.

        // base click value
        const BASE_CLICK_CP = 1;

        // ---------- helpers ----------
        function updateUI() {
            document.getElementById('cpDisplay').innerText = Math.floor(cp);
            document.getElementById('kcDisplay').innerText = Math.floor(kc);

            let totalAuto = (autoClickers * 0.2) + (docVerifiers * 0.05); // just visual ups
            document.getElementById('upsDisplay').innerText = totalAuto.toFixed(1);

            let backlogPercent = Math.min(backlog, 100);
            document.getElementById('backlogBar').style.width = backlogPercent + '%';
            document.getElementById('backlogText').innerText = `BACKLOG ${Math.floor(backlog)}%`;

            let scrPercent = Math.min(scrutiny, 100);
            document.getElementById('scrutinyFill').style.width = scrPercent + '%';
            document.getElementById('scrutinyPercent').innerText = Math.floor(scrutiny) + '%';

            // gameover check
            if (backlog >= 100) {
                alert('üíî AUDIT FAILED: You have been replaced by an offshore team. Game over. (refresh to restart)');
                // disable further play (simple freeze)
                document.getElementById('mainClick').style.pointerEvents = 'none';
            }

            // re-render shops
            renderShops();
        }

        // ---------- risk & backlog when verifying a user ----------
        function processUser(manual = true) {
            if (backlog >= 100) return;

            // base backlog increase
            let backlogIncrease = 1.2;
            // OCR scanner reduces backlog (each scanner -0.15)
            backlogIncrease -= ocrScanners * 0.15;
            if (backlogIncrease < 0.1) backlogIncrease = 0.1;
            backlog += backlogIncrease;
            if (backlog > 100) backlog = 100;

            // cp gain
            let clickCP = BASE_CLICK_CP + (docVerifiers * 1); // each doc verifier gives +1 CP per click
            cp += clickCP;

            // RISK: each user has hidden risk based on imaginary country
            // random risk factor 0.2 ~ 2.0
            let riskFactor = 0.5 + Math.random() * 1.8;
            // if liveness AI is active, reduce risk
            if (livenessAI > 0) riskFactor *= 0.4; 
            let scrutinyIncrease = riskFactor * 0.8;
            // blockchain module increases scrutiny even more (because of alerts)
            if (blockchainModule > 0) scrutinyIncrease *= 1.6; 
            scrutiny += scrutinyIncrease;
            if (scrutiny > 100) scrutiny = 100;

            usersProcessed++;

            // if scrutiny goes over 90, maybe warning but no auto loss (consultant needed)
            if (scrutiny >= 100) {
                // can be fixed only by "hire consultant" (manual)
            }
        }

        // ---------- auto generation per second ----------
        function autoTick() {
            if (backlog >= 100) return;

            // auto clickers produce users (and backlog/risk)
            for (let i = 0; i < autoClickers; i++) {
                // each autoclicker processes 0.2 users per sec -> every 5 sec we do 1 user? easier: increment per sec but fractional
                // we'll do fractional users: we add fractional backlog, cp etc
                if (Math.random() < 0.2) { // roughly 0.2 per second per clicker
                    let clickCP = BASE_CLICK_CP + (docVerifiers * 1);
                    cp += clickCP;
                    let inc = 1.2 - ocrScanners * 0.15;
                    if (inc < 0.1) inc = 0.1;
                    backlog += inc;
                    let risk = 0.5 + Math.random() * 1.8;
                    if (livenessAI > 0) risk *= 0.4;
                    scrutiny += risk * 0.8;
                    if (blockchainModule > 0) scrutiny += 0.6; // extra scrutiny per auto user
                }
            }
            if (blockchainModule > 0) {
                // also gives some kc per sec but adds scrutiny
                kc += 0.3 * blockchainModule;
                scrutiny += 0.7 * blockchainModule;
            }
            if (scrutiny > 100) scrutiny = 100;
            if (backlog > 100) backlog = 100;
            updateUI();
        }

        // ---------- purchase helpers ----------
        function buyCPItem(cost, callback) {
            if (cp >= cost) {
                cp -= cost;
                callback();
                updateUI();
                return true;
            }
            return false;
        }

        function buyKCItem(cost, callback) {
            if (kc >= cost) {
                kc -= cost;
                callback();
                updateUI();
                return true;
            }
            return false;
        }

        //  ---------- render shop items (dynamic) ----------
        function renderShops() {
            const cpDiv = document.getElementById('cpShop');
            const kcDiv = document.getElementById('kcShop');
            // CP shop items
            cpDiv.innerHTML = '';
            const cpItems = [
                { name: 'ü§ñ Auto‚ÄëClicker', desc: 'clicks 0.2 users/sec', cost: 10, key: 'auto', type:'cp' },
                { name: 'üìÑ Document Verifier', desc: '+1 CP per click', cost: 50, key: 'doc', type:'cp' },
                { name: 'üîç OCR Scanner', desc: 'reduces backlog growth', cost: 200, key: 'ocr', type:'cp' },
                { name: 'üëª 3AM shift', desc: 'adds 0.2 auto (like clicker)', cost: 500, key: 'shift', type:'cp' } // similar to clicker
            ];
            cpItems.forEach(item => {
                let btn = document.createElement('button');
                btn.innerText = `${item.name} (${item.cost} CP)`;
                btn.disabled = (cp < item.cost);
                btn.addEventListener('click', () => {
                    if (item.key === 'auto') buyCPItem(10, () => autoClickers++);
                    if (item.key === 'doc') buyCPItem(50, () => docVerifiers++);
                    if (item.key === 'ocr') buyCPItem(200, () => ocrScanners++);
                    if (item.key === 'shift') buyCPItem(500, () => autoClickers++); // same effect
                    updateUI();
                });
                let div = document.createElement('div');
                div.className = 'shop-item' + (btn.disabled ? ' disabled' : '');
                div.innerHTML = `<div class="item-name">${item.name}</div><div class="item-cost">${item.cost} CP</div><div class="item-desc">${item.desc}</div>`;
                div.appendChild(btn);
                cpDiv.appendChild(div);
            });

            // KC shop items
            kcDiv.innerHTML = '';
            const kcItems = [
                { name: 'üß† Liveness AI', desc: 'halves scrutiny gain', cost: 80, key: 'live', type:'kc' },
                { name: 'üîó Blockchain Analytics', desc: '+0.3 KC/s but +scrutiny', cost: 250, key: 'chain', type:'kc' },
                { name: 'üëî Hire Consultant', desc: 'resets scrutiny (one shot)', cost: 180, key: 'consult', type:'kc' }
            ];
            kcItems.forEach(item => {
                let btn = document.createElement('button');
                btn.innerText = `${item.name} (${item.cost} KC)`;
                btn.disabled = (kc < item.cost);
                btn.addEventListener('click', () => {
                    if (item.key === 'live') buyKCItem(80, () => livenessAI++);
                    if (item.key === 'chain') buyKCItem(250, () => blockchainModule++);
                    if (item.key === 'consult') {
                        buyKCItem(180, () => {
                            scrutiny = 0;
                        });
                    }
                    updateUI();
                });
                let div = document.createElement('div');
                div.className = 'shop-item' + (btn.disabled ? ' disabled' : '');
                div.innerHTML = `<div class="item-name">${item.name}</div><div class="item-cost">${item.cost} KC</div><div class="item-desc">${item.desc}</div>`;
                div.appendChild(btn);
                kcDiv.appendChild(div);
            });
        }

        // ---------- convert CP -> KC via form 83-B (annoying delay) ----------
        function convertCPtoKC() {
            if (cp < 50) {
                document.getElementById('conversionStatus').innerText = '‚ùå Need at least 50 CP to convert.';
                return;
            }
            // start mini game: disable convert button, simulate form
            let convertBtn = document.getElementById('convertBtn');
            convertBtn.disabled = true;
            let originalText = convertBtn.innerText;
            convertBtn.innerText = 'FILING 83‚ÄëB...';
            let statusDiv = document.getElementById('conversionStatus');
            statusDiv.innerHTML = 'üìù Tick box: ‚òë I confirm the conversion. <span id="fakeTick" style="cursor:pointer; background:#444; padding:4px;">[click to confirm]</span>';

            let tick = document.getElementById('fakeTick');
            if (tick) {
                tick.addEventListener('click', function handler() {
                    statusDiv.innerHTML = '‚è≥ Typing justification "I hereby confirm..." ...';
                    setTimeout(() => {
                        // conversion happens
                        let convertAmount = Math.min(100, cp - 20); // leave some CP
                        if (convertAmount < 10) convertAmount = cp * 0.5;
                        let deducted = Math.floor(convertAmount);
                        cp -= deducted;
                        kc += Math.floor(deducted / 5); // 5 CP ‚Üí 1 KC roughly
                        if (kc < 0) kc = 0;
                        statusDiv.innerHTML = `‚úÖ Conversion complete! you received ${Math.floor(deducted/5)} KC.`;
                        convertBtn.disabled = false;
                        convertBtn.innerText = originalText;
                        updateUI();
                    }, 2000);
                    tick.removeEventListener('click', handler);
                });
            }
        }

        // ---------- event listeners ----------
        document.getElementById('mainClick').addEventListener('click', () => {
            if (backlog >= 100) return;
            processUser(true);
            updateUI();
        });

        document.getElementById('convertBtn').addEventListener('click', convertCPtoKC);

        // set intervals
        setInterval(() => {
            autoTick();
        }, 1000);

        // initial render
        updateUI();

        // extra: every few seconds simulate random news (flavor)
        setInterval(() => {
            if (scrutiny < 95 && backlog < 90) {
                // add small random backlog creep
                backlog = Math.min(100, backlog + 0.1);
                updateUI();
            }
        }, 5000);
    })();
</script>
</body>
</html>
